{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"dd-virus-scan \u00b6 Service for scanning Dataverse datasets for virus Purpose \u00b6 Service for scanning Dataverse datasets for virus. Interfaces \u00b6 This service has the following interfaces: Provided interfaces \u00b6 Step invocation API \u00b6 Protocol type : HTTP Internal or external : internal Purpose : invoked by Dataverse when the PrePublishDataset workflow is executed Admin console \u00b6 Protocol type : HTTP Internal or external : internal Purpose : application monitoring and management Consumed interfaces \u00b6 Dataverse API \u00b6 Protocol type : HTTP Internal or external : internal Purpose : to retrieve file data to scan and to resume the workflow Processing \u00b6 The service uses the clamd daemon for the actual scanning. The data files of the dataset will be streamed through the clamd deamon one by one. If no virus is found the resume status will be \"Success\" , otherwise \"Failure\" with in the message the instantiated resultPostiveMessageTemplate . See the comments in the config.yml for details. The service has the following thread pools: Workers for incoming HTTP requests from Dataverse. These will schedule scan tasks. Scan task workers. These will loop over all the files in the targeted dataset and stream them through scand , gathering the results. The overall result will be determined a resumption of the workflow will be scheduled as a resume task. Resume task workers. These will try to resume the workflow. This will be tried a configured number of times because Dataverse has known synchronization issues in its workflow framework. References \u00b6 https://linux.die.net/man/8/clamd","title":"Description"},{"location":"#dd-virus-scan","text":"Service for scanning Dataverse datasets for virus","title":"dd-virus-scan"},{"location":"#purpose","text":"Service for scanning Dataverse datasets for virus.","title":"Purpose"},{"location":"#interfaces","text":"This service has the following interfaces:","title":"Interfaces"},{"location":"#provided-interfaces","text":"","title":"Provided interfaces"},{"location":"#step-invocation-api","text":"Protocol type : HTTP Internal or external : internal Purpose : invoked by Dataverse when the PrePublishDataset workflow is executed","title":"Step invocation API"},{"location":"#admin-console","text":"Protocol type : HTTP Internal or external : internal Purpose : application monitoring and management","title":"Admin console"},{"location":"#consumed-interfaces","text":"","title":"Consumed interfaces"},{"location":"#dataverse-api","text":"Protocol type : HTTP Internal or external : internal Purpose : to retrieve file data to scan and to resume the workflow","title":"Dataverse API"},{"location":"#processing","text":"The service uses the clamd daemon for the actual scanning. The data files of the dataset will be streamed through the clamd deamon one by one. If no virus is found the resume status will be \"Success\" , otherwise \"Failure\" with in the message the instantiated resultPostiveMessageTemplate . See the comments in the config.yml for details. The service has the following thread pools: Workers for incoming HTTP requests from Dataverse. These will schedule scan tasks. Scan task workers. These will loop over all the files in the targeted dataset and stream them through scand , gathering the results. The overall result will be determined a resumption of the workflow will be scheduled as a resume task. Resume task workers. These will try to resume the workflow. This will be tried a configured number of times because Dataverse has known synchronization issues in its workflow framework.","title":"Processing"},{"location":"#references","text":"https://linux.die.net/man/8/clamd","title":"References"},{"location":"config/","text":"Configuration \u00b6 This module can be configured by editing the configuration file. This file is installed in /etc/opt/dans.knaw.nl/dd-virus-scan/config.yml when using the RPM. The settings are explained with comments in the file itself. An on-line version of the latest configuration file can be found here .","title":"Configuration"},{"location":"config/#configuration","text":"This module can be configured by editing the configuration file. This file is installed in /etc/opt/dans.knaw.nl/dd-virus-scan/config.yml when using the RPM. The settings are explained with comments in the file itself. An on-line version of the latest configuration file can be found here .","title":"Configuration"},{"location":"context/","text":"Context \u00b6 This module is a component in the DANS Data Station Architecture .","title":"Context"},{"location":"context/#context","text":"This module is a component in the DANS Data Station Architecture .","title":"Context"},{"location":"dev/","text":"Development \u00b6 General information about developing DANS modules can be found here .","title":"Overview"},{"location":"dev/#development","text":"General information about developing DANS modules can be found here .","title":"Development"},{"location":"installation/","text":"Installation \u00b6 Currently, this project is built as an RPM package for RHEL8 and later. The RPM will install the binaries to /opt/dans.knaw.nl/dd-virus-scan and the configuration files to /etc/opt/dans.knaw.nl/dd-virus-scan . For installation on systems that do no support RPM and/or systemd: Build the tarball (see next section). Extract it to some location on your system, for example /opt/dans.knaw.nl/dd-virus-scan . Start the service with the following command /opt/dans.knaw.nl/dd-virus-scan/bin/dd-virus-scan server /opt/dans.knaw.nl/dd-virus-scan/cfg/config.yml Building from source \u00b6 Prerequisites: Java 17 or higher Maven 3.3.3 or higher RPM (optional, only if you want to build the RPM package) Steps: git clone https://github.com/DANS-KNAW/dd-virus-scan.git cd dd-virus-scan mvn clean install If the rpm executable is found at /usr/local/bin/rpm , the build profile that includes the RPM packaging will be activated. If rpm is available, but at a different path, then activate it by using Maven's -P switch: mvn -Pprm install . Alternatively, to build the tarball execute: mvn clean install assembly:single","title":"Installation"},{"location":"installation/#installation","text":"Currently, this project is built as an RPM package for RHEL8 and later. The RPM will install the binaries to /opt/dans.knaw.nl/dd-virus-scan and the configuration files to /etc/opt/dans.knaw.nl/dd-virus-scan . For installation on systems that do no support RPM and/or systemd: Build the tarball (see next section). Extract it to some location on your system, for example /opt/dans.knaw.nl/dd-virus-scan . Start the service with the following command /opt/dans.knaw.nl/dd-virus-scan/bin/dd-virus-scan server /opt/dans.knaw.nl/dd-virus-scan/cfg/config.yml","title":"Installation"},{"location":"installation/#building-from-source","text":"Prerequisites: Java 17 or higher Maven 3.3.3 or higher RPM (optional, only if you want to build the RPM package) Steps: git clone https://github.com/DANS-KNAW/dd-virus-scan.git cd dd-virus-scan mvn clean install If the rpm executable is found at /usr/local/bin/rpm , the build profile that includes the RPM packaging will be activated. If rpm is available, but at a different path, then activate it by using Maven's -P switch: mvn -Pprm install . Alternatively, to build the tarball execute: mvn clean install assembly:single","title":"Building from source"},{"location":"to-api/","text":"The API is defined in dd-virus-scan-api . The version implemented by this service can be viewed in Swagger UI in a new tab: API .","title":"API"}]}